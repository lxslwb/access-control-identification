user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;
# include /usr/share/nginx/modules/*.conf;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 768;
    # 1024
}

http {


    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;


	access_log  /usr/project/lot_3/log/nginx/access2.log;
    error_log   /usr/project/lot_3/log/nginx/error2.log;



	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;

    server {

        listen 8081;


        server_name 121.36.32.21;

        access_log  /usr/project/lot_3/log/nginx/access.log;
        error_log   /usr/project/lot_3/log/nginx/error.log;


        location / {

                proxy_pass http://127.0.0.1:5000/;
                # proxy_redirect off;

                proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header   X-Forwarded-Proto    $scheme;
                proxy_connect_timeout      120;
                proxy_send_timeout         120;
                proxy_read_timeout         120;
#                 proxy_http_version 1.1;
#                 proxy_set_header Connection "";

        }

    }

}

